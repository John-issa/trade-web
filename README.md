# trade-web

Wrapper API and barebones UI for running scripts from
[slsecret's options trading assistant](https://github.com/slsecret/options-trading-assistant)
repository.

The project is designed to make it easy to expose the Python tooling inside a
container (e.g. on Unraid behind a Cloudflare tunnel) while still being able to
exercise it locally for development.

## Project layout

```
.
├── app/                 # FastAPI application
│   ├── main.py          # Routes and tiny HTML landing page
│   └── run_script.py    # Sandbox runner around the Python trading repo
├── docker/
│   └── prestart.sh      # Optional git pull + Gunicorn entrypoint
├── docker-compose.yml   # Example compose file for Unraid
├── trade-repo/          # Place the cloned trading assistant repository here
└── requirements-wrapper.txt
```

## Local development

1. Clone this repository.
2. Clone the trading assistant repository next to the wrapper (or point
   `REPO_DIR` at an existing checkout):

   ```bash
   git clone https://github.com/slsecret/options-trading-assistant trade-repo
   ```

3. Install dependencies and run the application:

   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install --upgrade pip
   pip install -r requirements-wrapper.txt
   uvicorn app.main:app --reload
   ```

The app listens on <http://127.0.0.1:8000>. The landing page links to the
helper endpoints, and plots generated by the scripts are exposed underneath
`/plots/`.

When you open the site locally Uvicorn does not inject any kind of desktop UI;
everything is served as plain HTML inside the browser tab. If your operating
system pops up a separate window it is coming from the underlying helper
script (for example `csvViewer.py` can launch a Tk viewer when it is executed
directly). When you deploy the wrapper on Unraid or another server the browser
simply renders the FastAPI responses in the tab you navigated to—no extra
desktop windows will be triggered on the host.

### Environment variables

- `REPO_DIR` – Override the path to the trading assistant repository.
- `ALLOWED_SCRIPTS` – Comma separated list of script filenames that the wrapper
  is allowed to execute. Defaults to `plot.py,csvViewer.py,returns.py,options.py`.
- `PLOTS_DIR` – Optional path where generated plots should be stored. Defaults
  to `<REPO_DIR>/plots`, but if that directory is read-only the wrapper will
  fall back to a writable location under the system temp directory.

## Docker / Unraid

The provided `docker-compose.yml` is tailored for Unraid. It mounts the cloned
trading repo read-only inside the container and optionally persists generated
plots. Update the host paths to match your environment before deploying.

The Docker image uses Gunicorn with Uvicorn workers. You can adjust worker count
via the `GUNICORN_WORKERS` environment variable if you expect more concurrent
usage.
